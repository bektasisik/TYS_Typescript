(()=>{"use strict";var t={300:(t,e)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},674:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attendance=void 0,e.Attendance=class{constructor(t,e){this.date=new Date,this.today=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds(),this.id=t,this.prayerTime=e}showInfoAttendance(){console.log(this.id+" "+this.prayerTime+" "+this.today)}}},669:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StudentAttendance=void 0,e.StudentAttendance=class{constructor(t,e,n){this.student=t,this.attendance=e,this.isAbsence=n}getAttendance(){return this.attendance}getStudent(){return this.student}getIsAbsenceToString(t){return t?"Var":"Yok"}showInfoStudentAttendance(){console.log(this.student+" "+this.attendance+" "+this.getIsAbsenceToString)}}},607:function(t,e,n){var d=this&&this.__awaiter||function(t,e,n,d){return new(n||(n=Promise))((function(i,s){function o(t){try{r(d.next(t))}catch(t){s(t)}}function a(t){try{r(d.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}r((d=d.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n(287),s=n(711),o=new i.StudentService,a=new s.AttendanceService,r=document.getElementById("addStudentButton"),c=document.getElementById("updateStudentButton"),u=document.getElementById("takeAttendanceButton"),l=document.getElementById("nameInput"),h=document.getElementById("surnameInput"),p=document.getElementById("selectPrayerTime"),m=document.getElementsByName("selectAbsence"),f=(document.getElementById("selectListWithAttendanceId"),document.getElementById("mySelectStudentId"),document.getElementById("studentListBody")),v=document.getElementById("takeAttendanceBody");let y;function g(){!function(){d(this,void 0,void 0,(function*(){f.innerHTML="",(yield o.getStudents()).forEach((t=>{const e=document.createElement("tr"),n=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),s=document.createElement("td"),a=document.createElement("td"),u=document.createElement("td"),p=document.createElement("td"),m=document.createElement("button"),v=document.createElement("button");n.innerHTML=t.id.toString(),d.innerText=t.name,i.innerText=t.surname,s.innerText=t.absent.toString(),m.setAttribute("class","btn btn-danger"),m.setAttribute("id","deleteButton"),m.setAttribute("data-id",t.id.toString()),m.innerHTML='<i class="fas fa-trash-alt"></i>',v.setAttribute("class","btn btn-primary"),v.setAttribute("id","updateButton"),v.setAttribute("data-id",t.id.toString()),v.innerHTML='<i class="fa-solid fa-edit"></i>',a.appendChild(m),u.appendChild(v),e.appendChild(n),e.appendChild(d),e.appendChild(i),e.appendChild(s),p.appendChild(a),p.appendChild(u),p.setAttribute("class","d-flex justify-content-around"),e.appendChild(p),f.appendChild(e),m.addEventListener("click",(()=>{o.deleteStudent(Number(m.dataset.id)),g()})),v.addEventListener("click",(()=>{y=t,l.value=y.name,h.value=y.surname,r.style.display="none",c.style.display="block",c.setAttribute("data-id",y.id.toString())}))}))}))}(),function(){d(this,void 0,void 0,(function*(){v.innerHTML="",(yield o.getStudents()).forEach((t=>{const e=document.createElement("tr"),n=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),s=document.createElement("td"),o=document.createElement("select"),a=document.createElement("option"),r=document.createElement("option");n.innerHTML=t.id.toString(),d.innerText=t.name,i.innerText=t.surname,o.setAttribute("class","form-select"),o.setAttribute("name","selectAbsence"),o.setAttribute("aria-label","select example"),a.setAttribute("value","+"),r.setAttribute("value","-"),a.innerText="+",r.innerText="-",o.appendChild(a),o.appendChild(r),s.appendChild(o),e.appendChild(n),e.appendChild(d),e.appendChild(i),e.appendChild(s),v.appendChild(e)}))}))}()}document.getElementById("tbodyListForAttendance"),g(),r.addEventListener("click",(t=>d(void 0,void 0,void 0,(function*(){console.log("Ekleme"),yield o.addStudent(l.value,h.value),l.value="",h.value="",g(),t.preventDefault()})))),c.addEventListener("click",(t=>d(void 0,void 0,void 0,(function*(){yield o.updateStudent(y.id,l.value,h.value),l.value="",h.value="",g(),r.style.display="block",c.style.display="none",t.preventDefault()})))),u.addEventListener("click",(t=>d(void 0,void 0,void 0,(function*(){const e=new Map;(yield o.getStudents()).forEach(((t,n)=>{e.set(t,"+"===m[n].value)})),a.takeAttendance(p.value,e),console.log(a.getAttendanceList()),g(),function(){const t=a.getAttendanceList(),e=document.getElementById("selectListWithAttendanceId");e.innerHTML="";const n=document.createElement("option");n.setAttribute("disabled","disabled"),n.innerText="Lütfen Listelemek İstedğiniz Vakti Seçiniz...",e.appendChild(n),t.forEach((t=>{const n=document.createElement("option");n.setAttribute("value",t.id.toString()),n.innerText=t.today+" "+t.prayerTime,e.appendChild(n)}))}(),t.preventDefault()}))))},711:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AttendanceService=void 0;const d=n(674),i=n(669);e.AttendanceService=class{constructor(){this.attendances=[],this.studentAttendances=[],this.sequence=1}getAttendanceList(){return this.attendances}getAttendance(t){return this.attendances.filter((e=>e.id===t))[0]}getStudentAttendances(){return this.studentAttendances}getAttendancesByAttendanceId(t){return this.studentAttendances.filter((e=>e.getAttendance().id===t))}getAttendancesByStudentId(t){return this.studentAttendances.filter((e=>e.getStudent().id===t))}takeAttendance(t,e){const n=new d.Attendance(this.sequence++,t);this.attendances.push(n),e.forEach(((t,e)=>{const d=new i.StudentAttendance(e,n,t);t||e.increaseAbsent(),this.studentAttendances.push(d)}))}}},287:function(t,e,n){var d=this&&this.__awaiter||function(t,e,n,d){return new(n||(n=Promise))((function(i,s){function o(t){try{r(d.next(t))}catch(t){s(t)}}function a(t){try{r(d.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}r((d=d.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.StudentService=void 0;const s=i(n(300));var o="http://localhost:3002/api/v1";e.StudentService=class{constructor(){this._students=[],this._sequence=1,this.getStudents()}getStudents(){return d(this,void 0,void 0,(function*(){const t=yield(0,s.default)(o+"/students",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const e=yield t.json(),n=JSON.parse(JSON.stringify(e,null,4));return this._students=n,console.log(e),this._students}))}addStudent(t,e){return d(this,void 0,void 0,(function*(){const n=yield(0,s.default)(o+"/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,surname:e})});if(!n.ok)throw new Error(`Error! status: ${n.status}`);const d=yield n.json();return console.log("result is: ",JSON.stringify(d,null,4)),d}))}getStudent(t){return window.fetch(o+"students"+t,{method:"GET"}).then((t=>t.json())).then((t=>{console.log(t)})),this._students.find((e=>e.id===t))}updateStudent(t,e,n){return d(this,void 0,void 0,(function*(){const d=yield(0,s.default)(o+"/students/"+t,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t,name:e,surname:n})});if(!d.ok)throw new Error(`Error! status: ${d.status}`);const i=yield d.json();console.log("result is: ",JSON.stringify(i,null,4))}))}deleteStudent(t){return d(this,void 0,void 0,(function*(){const t=yield(0,s.default)(o+"/students/1",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const e=yield t.json();console.log("result is: ",JSON.stringify(e,null,4))}))}}}},e={};!function n(d){var i=e[d];if(void 0!==i)return i.exports;var s=e[d]={exports:{}};return t[d].call(s.exports,s,s.exports,n),s.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0EsRUFBYW5JLFFBR3JCLElBQUlELEVBQVNpSSxFQUF5QkUsR0FBWSxDQUdqRGxJLFFBQVMsQ0FBQyxHQU9YLE9BSEFxSSxFQUFvQkgsR0FBVUksS0FBS3ZJLEVBQU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVNpSSxHQUdwRWxJLEVBQU9DLE9BQ2YsQ0NuQjBCaUksQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3R5cy8uL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdHlzLy4vc3JjL2RvbWFpbi9hdHRlbmRhbmNlLnRzIiwid2VicGFjazovL3R5cy8uL3NyYy9kb21haW4vc3R1ZGVudF9hdHRlbmRhbmNlLnRzIiwid2VicGFjazovL3R5cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly90eXMvLi9zcmMvc2VydmljZS9hdHRlbmRhbmNlX3NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vdHlzLy4vc3JjL3NlcnZpY2Uvc3R1ZGVudF9zZXJ2aWNlLnRzIiwid2VicGFjazovL3R5cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90eXMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG5cdC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuXHQvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cblx0aWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gc2VsZjsgfVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGdsb2JhbDsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGdsb2JhbC5mZXRjaDtcblxuLy8gTmVlZGVkIGZvciBUeXBlU2NyaXB0IGFuZCBXZWJwYWNrLlxuaWYgKGdsb2JhbC5mZXRjaCkge1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnbG9iYWwuZmV0Y2guYmluZChnbG9iYWwpO1xufVxuXG5leHBvcnRzLkhlYWRlcnMgPSBnbG9iYWwuSGVhZGVycztcbmV4cG9ydHMuUmVxdWVzdCA9IGdsb2JhbC5SZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IGdsb2JhbC5SZXNwb25zZTsiLCJleHBvcnQgY2xhc3MgQXR0ZW5kYW5jZSB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBwcmF5ZXJUaW1lOiBzdHJpbmc7XG4gICAgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICB0b2RheSA9IHRoaXMuZGF0ZS5nZXREYXRlKCkgKyBcIi9cIiArICh0aGlzLmRhdGUuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKSArIFwiIFwiICsgdGhpcy5kYXRlLmdldEhvdXJzKCkgKyBcIjpcIiArIHRoaXMuZGF0ZS5nZXRNaW51dGVzKCkgKyBcIjpcIiArIHRoaXMuZGF0ZS5nZXRTZWNvbmRzKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwcmF5ZXJUaW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnByYXllclRpbWUgPSBwcmF5ZXJUaW1lO1xuICAgIH1cblxuICAgIHNob3dJbmZvQXR0ZW5kYW5jZSgpIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5pZCArIFwiIFwiICsgdGhpcy5wcmF5ZXJUaW1lICsgXCIgXCIgKyB0aGlzLnRvZGF5KTtcbiAgICB9XG59IiwiaW1wb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuL3N0dWRlbnRcIjtcbmltcG9ydCB7IEF0dGVuZGFuY2UgfSBmcm9tIFwiLi9hdHRlbmRhbmNlXCI7XG5leHBvcnQgY2xhc3MgU3R1ZGVudEF0dGVuZGFuY2Uge1xuICAgIHN0dWRlbnQ6IFN0dWRlbnQ7XG4gICAgYXR0ZW5kYW5jZTogQXR0ZW5kYW5jZTtcbiAgICBpc0Fic2VuY2U6IEJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihzdHVkZW50OiBTdHVkZW50LCBhdHRlbmRhbmNlOiBBdHRlbmRhbmNlLCBpc0Fic2VuY2U6IEJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5zdHVkZW50ID0gc3R1ZGVudDtcbiAgICAgICAgdGhpcy5hdHRlbmRhbmNlID0gYXR0ZW5kYW5jZTtcbiAgICAgICAgdGhpcy5pc0Fic2VuY2UgPSBpc0Fic2VuY2U7XG4gICAgfVxuXG4gICAgZ2V0QXR0ZW5kYW5jZSgpOkF0dGVuZGFuY2V7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dGVuZGFuY2U7XG4gICAgfVxuICAgIGdldFN0dWRlbnQoKTpTdHVkZW50e1xuICAgICAgICByZXR1cm4gdGhpcy5zdHVkZW50O1xuICAgIH1cblxuICAgIGdldElzQWJzZW5jZVRvU3RyaW5nKGlzQWJzZW5jZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpc0Fic2VuY2UgPyBcIlZhclwiIDogXCJZb2tcIjtcbiAgICB9XG5cbiAgICBzaG93SW5mb1N0dWRlbnRBdHRlbmRhbmNlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0dWRlbnQgKyBcIiBcIiArIHRoaXMuYXR0ZW5kYW5jZSArIFwiIFwiICsgdGhpcy5nZXRJc0Fic2VuY2VUb1N0cmluZyk7XG4gICAgfVxufSIsImltcG9ydCB7IFN0dWRlbnRTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zdHVkZW50X3NlcnZpY2VcIjtcbmltcG9ydCB7IEF0dGVuZGFuY2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9hdHRlbmRhbmNlX3NlcnZpY2VcIjtcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9kb21haW4vc3R1ZGVudFwiO1xuaW1wb3J0IHsgQXR0ZW5kYW5jZSB9IGZyb20gXCIuL2RvbWFpbi9hdHRlbmRhbmNlXCI7XG5cbmNvbnN0IHN0dWRlbnRTZXJ2aWNlID0gbmV3IFN0dWRlbnRTZXJ2aWNlKCk7XG5jb25zdCBhdHRlbmRhbmNlU2VydmljZSA9IG5ldyBBdHRlbmRhbmNlU2VydmljZSgpO1xuXG5jb25zdCBhZGRTdHVkZW50QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRTdHVkZW50QnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3QgdXBkYXRlU3R1ZGVudEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXBkYXRlU3R1ZGVudEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IHRha2VBdHRlbmRhbmNlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YWtlQXR0ZW5kYW5jZUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lSW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbmNvbnN0IHN1cm5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VybmFtZUlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbmNvbnN0IHNlbGVjdFByYXllclRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbGVjdFByYXllclRpbWVcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbmNvbnN0IHNlbGVjdExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcInNlbGVjdEFic2VuY2VcIikgYXMgTm9kZUxpc3RPZjxIVE1MU2VsZWN0RWxlbWVudD47XG5jb25zdCBteVNlbGVjdEF0dGVuZGFuY2VJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0TGlzdFdpdGhBdHRlbmRhbmNlSWRcIikgYXMgSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5jb25zdCBteVNlbGVjdFN0dWRlbnRJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlTZWxlY3RTdHVkZW50SWRcIikgYXMgSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5cbmNvbnN0IHN0dWRlbnRUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R1ZGVudExpc3RCb2R5XCIpIGFzIEhUTUxUYWJsZUVsZW1lbnQ7XG5jb25zdCB0YWtlQXR0ZW5kYW5jZVRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YWtlQXR0ZW5kYW5jZUJvZHlcIikgYXMgSFRNTFRhYmxlRWxlbWVudDtcbmNvbnN0IHRib2R5TGlzdEZvckF0dGVuZGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRib2R5TGlzdEZvckF0dGVuZGFuY2VcIikgYXMgSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5cblxubGV0IHNlbGVjdGVkU3R1ZGVudDogU3R1ZGVudDtcbnNob3dMaXN0cygpO1xuXG5hZGRTdHVkZW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICBjb25zb2xlLmxvZyhcIkVrbGVtZVwiKTtcbiAgYXdhaXQgc3R1ZGVudFNlcnZpY2UuYWRkU3R1ZGVudChuYW1lSW5wdXQudmFsdWUsIHN1cm5hbWVJbnB1dC52YWx1ZSk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gIHN1cm5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gIHNob3dMaXN0cygpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxudXBkYXRlU3R1ZGVudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgYXdhaXQgc3R1ZGVudFNlcnZpY2UudXBkYXRlU3R1ZGVudChzZWxlY3RlZFN0dWRlbnQuaWQsIG5hbWVJbnB1dC52YWx1ZSwgc3VybmFtZUlucHV0LnZhbHVlKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgc3VybmFtZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgc2hvd0xpc3RzKCk7XG4gIGFkZFN0dWRlbnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgdXBkYXRlU3R1ZGVudEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG50YWtlQXR0ZW5kYW5jZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuIChhd2FpdCBzdHVkZW50U2VydmljZS5nZXRTdHVkZW50cygpKS5mb3JFYWNoKChzdHVkZW50OiBTdHVkZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgbWFwLnNldChzdHVkZW50LCBzZWxlY3RMaXN0W2luZGV4XS52YWx1ZSA9PT0gXCIrXCIpO1xuICB9KVxuICBhdHRlbmRhbmNlU2VydmljZS50YWtlQXR0ZW5kYW5jZShzZWxlY3RQcmF5ZXJUaW1lLnZhbHVlLCBtYXApO1xuICBjb25zb2xlLmxvZyhhdHRlbmRhbmNlU2VydmljZS5nZXRBdHRlbmRhbmNlTGlzdCgpKTtcbiAgc2hvd0xpc3RzKCk7XG4gIGxpc3RXaXRoQXR0ZW5kYW5jZUlkKCk7XG4gIC8vIGxpc3RTdHVkZW50c0ZvckF0dGVuZGFuY2UoKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG59KTtcblxuXG5mdW5jdGlvbiBzaG93TGlzdHMoKSB7XG4gIHNob3dTdHVkZW50TGlzdCgpO1xuICBzaG93QXR0ZW5kYW5jZUxpc3QoKTtcbn1cblxuLyoqXG4gKiDDlsSfcmVuY2kgbGlzdGVzaW5pIGVrcmFuYSB5YXpkxLFybWEgKHRhYmxvZGEpXG4gKi9cbiBhc3luYyBmdW5jdGlvbiBzaG93U3R1ZGVudExpc3QoKSB7XG4gIHN0dWRlbnRUYWJsZS5pbm5lckhUTUwgPSBcIlwiO1xuICAgKGF3YWl0IHN0dWRlbnRTZXJ2aWNlLmdldFN0dWRlbnRzKCkpLmZvckVhY2goKHN0dWRlbnQ6IFN0dWRlbnQpID0+IHtcbiAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcbiAgICBjb25zdCB0ZElkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgIGNvbnN0IHRkTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICBjb25zdCB0ZFN1cm5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgdGRBYnNlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgdGREZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgdGRVcGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgdGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjb25zdCB1cGRhdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgdGRJZC5pbm5lckhUTUwgPSBzdHVkZW50LmlkLnRvU3RyaW5nKCk7XG4gICAgdGROYW1lLmlubmVyVGV4dCA9IHN0dWRlbnQubmFtZTtcbiAgICB0ZFN1cm5hbWUuaW5uZXJUZXh0ID0gc3R1ZGVudC5zdXJuYW1lO1xuICAgIHRkQWJzZW50LmlubmVyVGV4dCA9IHN0dWRlbnQuYWJzZW50LnRvU3RyaW5nKCk7XG4gICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiYnRuIGJ0bi1kYW5nZXJcIik7XG4gICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGVsZXRlQnV0dG9uXCIpO1xuICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHN0dWRlbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgZGVsZXRlQnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhcyBmYS10cmFzaC1hbHRcIj48L2k+JztcbiAgICB1cGRhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJidG4gYnRuLXByaW1hcnlcIik7XG4gICAgdXBkYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidXBkYXRlQnV0dG9uXCIpO1xuICAgIHVwZGF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHN0dWRlbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgdXBkYXRlQnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWVkaXRcIj48L2k+JztcbiAgICB0ZERlbGV0ZS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgIHRkVXBkYXRlLmFwcGVuZENoaWxkKHVwZGF0ZUJ1dHRvbik7XG4gICAgdHIuYXBwZW5kQ2hpbGQodGRJZCk7XG4gICAgdHIuYXBwZW5kQ2hpbGQodGROYW1lKTtcbiAgICB0ci5hcHBlbmRDaGlsZCh0ZFN1cm5hbWUpO1xuICAgIHRyLmFwcGVuZENoaWxkKHRkQWJzZW50KTtcbiAgICB0ZEJ1dHRvbi5hcHBlbmRDaGlsZCh0ZERlbGV0ZSk7XG4gICAgdGRCdXR0b24uYXBwZW5kQ2hpbGQodGRVcGRhdGUpO1xuICAgIHRkQnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZC1mbGV4IGp1c3RpZnktY29udGVudC1hcm91bmRcIik7XG4gICAgdHIuYXBwZW5kQ2hpbGQodGRCdXR0b24pO1xuICAgIHN0dWRlbnRUYWJsZS5hcHBlbmRDaGlsZCh0cik7XG5cbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIgLCAoKSA9PiB7XG4gICAgICBzdHVkZW50U2VydmljZS5kZWxldGVTdHVkZW50KE51bWJlcihkZWxldGVCdXR0b24uZGF0YXNldC5pZCkpO1xuICAgICAgc2hvd0xpc3RzKCk7XG4gICAgfSk7XG4gICAgdXBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzZWxlY3RlZFN0dWRlbnQgPSBzdHVkZW50O1xuICAgICAgbmFtZUlucHV0LnZhbHVlID0gc2VsZWN0ZWRTdHVkZW50Lm5hbWU7XG4gICAgICBzdXJuYW1lSW5wdXQudmFsdWUgPSBzZWxlY3RlZFN0dWRlbnQuc3VybmFtZTtcbiAgICAgIGFkZFN0dWRlbnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgdXBkYXRlU3R1ZGVudEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgdXBkYXRlU3R1ZGVudEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHNlbGVjdGVkU3R1ZGVudC5pZC50b1N0cmluZygpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNob3dBdHRlbmRhbmNlTGlzdCgpIHtcbiAgdGFrZUF0dGVuZGFuY2VUYWJsZS5pbm5lckhUTUwgPSBcIlwiO1xuICAoYXdhaXQgc3R1ZGVudFNlcnZpY2UuZ2V0U3R1ZGVudHMoKSkuZm9yRWFjaCgoc3R1ZGVudDogeyBpZDogeyB0b1N0cmluZzogKCkgPT4gc3RyaW5nOyB9OyBuYW1lOiBzdHJpbmc7IHN1cm5hbWU6IHN0cmluZzsgfSkgPT4ge1xuICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgIGNvbnN0IHRkSWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgY29uc3QgdGROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgIGNvbnN0IHRkU3VybmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICBjb25zdCB0ZE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgIGNvbnN0IG9wdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIGNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXG4gICAgdGRJZC5pbm5lckhUTUwgPSBzdHVkZW50LmlkLnRvU3RyaW5nKCk7XG4gICAgdGROYW1lLmlubmVyVGV4dCA9IHN0dWRlbnQubmFtZTtcbiAgICB0ZFN1cm5hbWUuaW5uZXJUZXh0ID0gc3R1ZGVudC5zdXJuYW1lO1xuICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImZvcm0tc2VsZWN0XCIpO1xuICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2VsZWN0QWJzZW5jZVwiKTtcbiAgICBzZWxlY3Quc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcInNlbGVjdCBleGFtcGxlXCIpO1xuICAgIG9wdGlvbjEuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCIrXCIpO1xuICAgIG9wdGlvbjIuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCItXCIpO1xuICAgIG9wdGlvbjEuaW5uZXJUZXh0ID0gXCIrXCI7XG4gICAgb3B0aW9uMi5pbm5lclRleHQgPSBcIi1cIjtcblxuICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xKTtcbiAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMik7XG4gICAgdGRPcHRpb24uYXBwZW5kQ2hpbGQoc2VsZWN0KTtcbiAgICB0ci5hcHBlbmRDaGlsZCh0ZElkKTtcbiAgICB0ci5hcHBlbmRDaGlsZCh0ZE5hbWUpO1xuICAgIHRyLmFwcGVuZENoaWxkKHRkU3VybmFtZSk7XG4gICAgdHIuYXBwZW5kQ2hpbGQodGRPcHRpb24pO1xuICAgIHRha2VBdHRlbmRhbmNlVGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbGlzdFdpdGhBdHRlbmRhbmNlSWQoKSB7XG4gIGNvbnN0IGF0dGVuZGFuY2VMaXN0ID0gYXR0ZW5kYW5jZVNlcnZpY2UuZ2V0QXR0ZW5kYW5jZUxpc3QoKTtcbiAgY29uc3Qgc2VsZWN0TGlzdFdpdGhBdHRlbmRhbmNlSWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbGVjdExpc3RXaXRoQXR0ZW5kYW5jZUlkXCIpIGFzIEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xuICBzZWxlY3RMaXN0V2l0aEF0dGVuZGFuY2VJZC5pbm5lckhUTUwgPSBcIlwiO1xuICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICBvcHRpb24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgb3B0aW9uLmlubmVyVGV4dCA9IFwiTMO8dGZlbiBMaXN0ZWxlbWVrIMSwc3RlZMSfaW5peiBWYWt0aSBTZcOnaW5pei4uLlwiO1xuICBzZWxlY3RMaXN0V2l0aEF0dGVuZGFuY2VJZC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICBhdHRlbmRhbmNlTGlzdC5mb3JFYWNoKChhdHRlbmRhbmNlKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgYXR0ZW5kYW5jZS5pZC50b1N0cmluZygpKTtcbiAgICBvcHRpb24uaW5uZXJUZXh0ID0gYXR0ZW5kYW5jZS50b2RheSArIFwiIFwiICsgYXR0ZW5kYW5jZS5wcmF5ZXJUaW1lO1xuICAgIHNlbGVjdExpc3RXaXRoQXR0ZW5kYW5jZUlkLmFwcGVuZENoaWxkKG9wdGlvbik7XG5cbiAgfSk7XG59XG4iLCJpbXBvcnQge1N0dWRlbnR9IGZyb20gXCIuLi9kb21haW4vc3R1ZGVudFwiO1xuaW1wb3J0IHtBdHRlbmRhbmNlfSBmcm9tIFwiLi4vZG9tYWluL2F0dGVuZGFuY2VcIjtcbmltcG9ydCB7U3R1ZGVudEF0dGVuZGFuY2V9IGZyb20gXCIuLi9kb21haW4vc3R1ZGVudF9hdHRlbmRhbmNlXCI7XG5cbmV4cG9ydCBjbGFzcyBBdHRlbmRhbmNlU2VydmljZSB7XG4gICAgYXR0ZW5kYW5jZXM6IEFycmF5PEF0dGVuZGFuY2U+ID0gW107XG4gICAgc3R1ZGVudEF0dGVuZGFuY2VzOiBBcnJheTxTdHVkZW50QXR0ZW5kYW5jZT4gPSBbXTtcbiAgICBzZXF1ZW5jZTogbnVtYmVyID0gMTtcblxuICAgIGdldEF0dGVuZGFuY2VMaXN0KCk6IEFycmF5PEF0dGVuZGFuY2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0ZW5kYW5jZXM7XG4gICAgfVxuXG4gICAgZ2V0QXR0ZW5kYW5jZShhdHRlbmRhbmNlSWQ6IG51bWJlcik6IEF0dGVuZGFuY2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRlbmRhbmNlcy5maWx0ZXIoXG4gICAgICAgICAgICAoYXR0ZW5kYW5jZSkgPT4gYXR0ZW5kYW5jZS5pZCA9PT0gYXR0ZW5kYW5jZUlkKVswXTtcbiAgICB9XG5cbiAgICBnZXRTdHVkZW50QXR0ZW5kYW5jZXMoKTogQXJyYXk8U3R1ZGVudEF0dGVuZGFuY2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R1ZGVudEF0dGVuZGFuY2VzO1xuICAgIH1cblxuICAgIGdldEF0dGVuZGFuY2VzQnlBdHRlbmRhbmNlSWQoYXR0ZW5kYW5jZUlkOiBudW1iZXIpOiBBcnJheTxTdHVkZW50QXR0ZW5kYW5jZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHVkZW50QXR0ZW5kYW5jZXMuZmlsdGVyKFxuICAgICAgICAgICAgKHN0dWRlbnRBdHRlbmRhbmNlKSA9PlxuICAgICAgICAgICAgICAgIHN0dWRlbnRBdHRlbmRhbmNlLmdldEF0dGVuZGFuY2UoKS5pZCA9PT0gYXR0ZW5kYW5jZUlkKTtcbiAgICB9XG5cbiAgICBnZXRBdHRlbmRhbmNlc0J5U3R1ZGVudElkKHN0dWRlbnRJZDogbnVtYmVyKTogQXJyYXk8U3R1ZGVudEF0dGVuZGFuY2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R1ZGVudEF0dGVuZGFuY2VzLmZpbHRlcihcbiAgICAgICAgICAgIChzdHVkZW50QXR0ZW5kYW5jZSkgPT4gc3R1ZGVudEF0dGVuZGFuY2UuZ2V0U3R1ZGVudCgpLmlkID09PSBzdHVkZW50SWQpO1xuICAgIH1cblxuICAgIHRha2VBdHRlbmRhbmNlKHByYXllclRpbWU6IHN0cmluZywgYXR0ZW5kYW5jZU1hcDogTWFwPFN0dWRlbnQsIGJvb2xlYW4+KSB7XG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBuZXcgQXR0ZW5kYW5jZSh0aGlzLnNlcXVlbmNlKyssIHByYXllclRpbWUpO1xuICAgICAgICB0aGlzLmF0dGVuZGFuY2VzLnB1c2goYXR0ZW5kYW5jZSk7XG5cbiAgICAgICAgYXR0ZW5kYW5jZU1hcC5mb3JFYWNoKChpc0Fic2VuY2UsIHN0dWRlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRBdHRlbmRhbmNlID0gbmV3IFN0dWRlbnRBdHRlbmRhbmNlKHN0dWRlbnQsIGF0dGVuZGFuY2UsIGlzQWJzZW5jZSk7XG4gICAgICAgICAgICBpZiAoIWlzQWJzZW5jZSl7XG4gICAgICAgICAgICAgICAgc3R1ZGVudC5pbmNyZWFzZUFic2VudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdHVkZW50QXR0ZW5kYW5jZXMucHVzaChzdHVkZW50QXR0ZW5kYW5jZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3N0dWRlbnRcIjtcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcblxudmFyIGFwaVVybDogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEnO1xuXG5leHBvcnQgY2xhc3MgU3R1ZGVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3N0dWRlbnRzOiBBcnJheTxTdHVkZW50PiA9IFtdO1xuICAgIHByaXZhdGUgX3NlcXVlbmNlOiBudW1iZXIgPSAxO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ2V0U3R1ZGVudHMoKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRTdHVkZW50cygpIDogUHJvbWlzZTxBcnJheTxTdHVkZW50Pj4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvc3R1ZGVudHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPFN0dWRlbnRbXT5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgNCkpO1xuXG4gICAgICAgIHRoaXMuX3N0dWRlbnRzID0gZ2V0UmVzdWx0IGFzIEFycmF5PFN0dWRlbnQ+O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHVkZW50cztcbiAgICB9XG5cblxuICAgIGFzeW5jIGFkZFN0dWRlbnQobmFtZTogc3RyaW5nLCBzdXJuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwgKyAnL3N0dWRlbnRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBzdXJuYW1lOiBzdXJuYW1lXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCA0KSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG5cbiAgICBnZXRTdHVkZW50KHN0dWRlbnRJZDogbnVtYmVyKTogU3R1ZGVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHdpbmRvdy5mZXRjaChhcGlVcmwgKyAnc3R1ZGVudHMnICsgc3R1ZGVudElkLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgICAudGhlbihqc29uID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHVkZW50cy5maW5kKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCA9PT0gc3R1ZGVudElkKTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVTdHVkZW50KHN0dWRlbnRJZDogbnVtYmVyLCBuYW1lOiBzdHJpbmcsIHN1cm5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvc3R1ZGVudHMvJyArIHN0dWRlbnRJZCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBpZDogc3R1ZGVudElkLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgc3VybmFtZTogc3VybmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCA0KSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlU3R1ZGVudChzdHVkZW50SWQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvc3R1ZGVudHMvMScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCA0KSk7XG4gICAgfVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsInNlbGYiLCJ3aW5kb3ciLCJFcnJvciIsImdldEdsb2JhbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJmZXRjaCIsImJpbmQiLCJIZWFkZXJzIiwiUmVxdWVzdCIsIlJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJpZCIsInByYXllclRpbWUiLCJkYXRlIiwiRGF0ZSIsInRvZGF5IiwidGhpcyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInNob3dJbmZvQXR0ZW5kYW5jZSIsImNvbnNvbGUiLCJsb2ciLCJzdHVkZW50IiwiYXR0ZW5kYW5jZSIsImlzQWJzZW5jZSIsImdldEF0dGVuZGFuY2UiLCJnZXRTdHVkZW50IiwiZ2V0SXNBYnNlbmNlVG9TdHJpbmciLCJzaG93SW5mb1N0dWRlbnRBdHRlbmRhbmNlIiwic3R1ZGVudFNlcnZpY2UiLCJTdHVkZW50U2VydmljZSIsImF0dGVuZGFuY2VTZXJ2aWNlIiwiQXR0ZW5kYW5jZVNlcnZpY2UiLCJhZGRTdHVkZW50QnV0dG9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVwZGF0ZVN0dWRlbnRCdXR0b24iLCJ0YWtlQXR0ZW5kYW5jZUJ1dHRvbiIsIm5hbWVJbnB1dCIsInN1cm5hbWVJbnB1dCIsInNlbGVjdFByYXllclRpbWUiLCJzZWxlY3RMaXN0IiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJzdHVkZW50VGFibGUiLCJ0YWtlQXR0ZW5kYW5jZVRhYmxlIiwic2VsZWN0ZWRTdHVkZW50Iiwic2hvd0xpc3RzIiwiaW5uZXJIVE1MIiwiZ2V0U3R1ZGVudHMiLCJmb3JFYWNoIiwidHIiLCJjcmVhdGVFbGVtZW50IiwidGRJZCIsInRkTmFtZSIsInRkU3VybmFtZSIsInRkQWJzZW50IiwidGREZWxldGUiLCJ0ZFVwZGF0ZSIsInRkQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwidXBkYXRlQnV0dG9uIiwidG9TdHJpbmciLCJpbm5lclRleHQiLCJuYW1lIiwic3VybmFtZSIsImFic2VudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZVN0dWRlbnQiLCJOdW1iZXIiLCJkYXRhc2V0IiwidmFsdWUiLCJzdHlsZSIsImRpc3BsYXkiLCJzaG93U3R1ZGVudExpc3QiLCJ0ZE9wdGlvbiIsInNlbGVjdCIsIm9wdGlvbjEiLCJvcHRpb24yIiwic2hvd0F0dGVuZGFuY2VMaXN0IiwiZSIsImFkZFN0dWRlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVwZGF0ZVN0dWRlbnQiLCJtYXAiLCJNYXAiLCJpbmRleCIsInNldCIsInRha2VBdHRlbmRhbmNlIiwiZ2V0QXR0ZW5kYW5jZUxpc3QiLCJhdHRlbmRhbmNlTGlzdCIsInNlbGVjdExpc3RXaXRoQXR0ZW5kYW5jZUlkIiwib3B0aW9uIiwibGlzdFdpdGhBdHRlbmRhbmNlSWQiLCJhdHRlbmRhbmNlcyIsInN0dWRlbnRBdHRlbmRhbmNlcyIsInNlcXVlbmNlIiwiYXR0ZW5kYW5jZUlkIiwiZmlsdGVyIiwiZ2V0U3R1ZGVudEF0dGVuZGFuY2VzIiwiZ2V0QXR0ZW5kYW5jZXNCeUF0dGVuZGFuY2VJZCIsInN0dWRlbnRBdHRlbmRhbmNlIiwiZ2V0QXR0ZW5kYW5jZXNCeVN0dWRlbnRJZCIsInN0dWRlbnRJZCIsImF0dGVuZGFuY2VNYXAiLCJBdHRlbmRhbmNlIiwicHVzaCIsIlN0dWRlbnRBdHRlbmRhbmNlIiwiaW5jcmVhc2VBYnNlbnQiLCJhcGlVcmwiLCJfc3R1ZGVudHMiLCJfc2VxdWVuY2UiLCJyZXNwb25zZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsInN0YXR1cyIsInJlc3VsdCIsImpzb24iLCJnZXRSZXN1bHQiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJib2R5IiwidGhlbiIsImZpbmQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=
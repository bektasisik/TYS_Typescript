(()=>{"use strict";var e={300:(e,t)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},674:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Attendance=void 0,t.Attendance=class{constructor(e,t){this.date=new Date,this.today=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds(),this.id=e,this.prayerTime=t}showInfoAttendance(){console.log(this.id+" "+this.prayerTime+" "+this.today)}}},406:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0,t.Student=class{constructor(e,t,n){this.id=e,this.name=t,this.surname=n,this.absent=0}increaseAbsent(){this.absent=this.absent+1}setName(e){this.name=e}setSurname(e){this.surname=e}showInfoStudent(){console.log(this.name+" "+this.surname+" "+this.absent)}}},669:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentAttendance=void 0,t.StudentAttendance=class{constructor(e,t,n){this.student=e,this.attendance=t,this.isAbsence=n}getAttendance(){return this.attendance}getStudent(){return this.student}getIsAbsenceToString(){return this.isAbsence?"Var":"Yok"}showInfoStudentAttendance(){console.log(this.student+" "+this.attendance+" "+this.getIsAbsenceToString)}}},711:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AttendanceService=void 0;const a=n(674),s=n(669);var d="http://localhost:3002/api/v1";t.AttendanceService=class{constructor(){this._attendances=[],this._studentAttendances=[],this._sequence=1}getAttendanceList(){return this._attendances}getAttendance(e){return this._attendances.filter((t=>t.id===e))[0]}getStudentAttendances(){return this._studentAttendances}async getAttendancesByAttendanceId(e){const t=await fetch(d+"/attendances/"+e,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const n=await t.json();return console.log("result is: ",JSON.stringify(n)),this._studentAttendances.filter((t=>t.getAttendance().id===e))}async getAttendancesByStudentId(e){const t=await fetch(d+"/attendances/"+e,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const n=await t.json();return console.log("result is: ",JSON.stringify(n)),this._studentAttendances.filter((t=>t.getStudent().id===e))}async takeAttendance(e,t){const n=new a.Attendance(this._sequence++,e);t.forEach((async(e,t)=>{const a=new s.StudentAttendance(t,n,e);e||t.increaseAbsent(),this._studentAttendances.push(a)}));const i=await fetch(d+"/attendances",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this._sequence,prayerTime:e,attendanceMap:t})});if(!i.ok)throw new Error(i.statusText);const o=await i.json();console.log("result is: ",JSON.stringify(o)),this._attendances.push(n)}async updateAttendance(e,t,n){const a=this.getAttendance(e);a&&(a.prayerTime=t,this._studentAttendances=this._studentAttendances.filter((t=>t.getAttendance().id!==e)),n.forEach((async(e,t)=>{const n=new s.StudentAttendance(t,a,e);e||t.increaseAbsent(),this._studentAttendances.push(n)})));const i=await fetch(d+"/attendances/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,prayerTime:t,attendanceMap:n})});if(!i.ok)throw new Error(i.statusText)}async deleteAttendance(e){this.getAttendance(e)&&(this._attendances=this._attendances.filter((t=>t.id!==e)),this._studentAttendances=this._studentAttendances.filter((t=>t.getAttendance().id!==e)));const t=await fetch(d+"/attendances/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!t.ok)throw new Error(t.statusText)}}},287:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentService=void 0;const s=n(406),d=a(n(300));var i="http://localhost:3002/api/v1";t.StudentService=class{constructor(){this._students=[],this._sequence=0}async fetchStudents(){const e=await(0,d.default)(i+"/students",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error! status: ${e.status}`);return(await e.json()).forEach((e=>{this._students.push(new s.Student(e.id,e.name,e.surname))})),this._sequence=this._students.length,this._students}getStudents(){return this._students}async addStudent(e,t){const n=await(0,d.default)(i+"/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this._sequence++,name:e,surname:t,absent:0})});if(!n.ok)throw new Error(`Error! status: ${n.status}`);const a=await n.json();console.log("result is: ",JSON.stringify(a));const o=new s.Student(this._sequence,e,t);this._students.push(o)}getStudent(e){return window.fetch(i+"/students/"+e,{method:"GET"}).then((e=>e.json())).then((e=>{console.log(e)})),this._students.find((t=>t.id===e))}getStudentById(e){return this._students.find((t=>t.id===e))}async updateStudent(e,t,n){const a=await(0,d.default)(i+"/students/"+e.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,surname:n})});if(!a.ok)throw new Error(`Error! status: ${a.status}`);const s=await a.json();console.log("result is: ",JSON.stringify(s)),e.name=t,e.surname=n}async deleteStudent(e){const t=await(0,d.default)(i+"/students/"+e,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const n=await t.json();console.log("result is: ",JSON.stringify(n));const a=this._students.filter((t=>t.id!==e));this._students=a}async deleteStudentWithId(e){const t=await(0,d.default)(i+"/students/"+e,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`Error! status: ${t.status}`);const n=await t.json();console.log("result is: ",JSON.stringify(n));const a=this._students.filter((t=>t.id!==e));this._students=a}}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var d=t[a]={exports:{}};return e[a].call(d.exports,d,d.exports,n),d.exports}(()=>{const e=n(287),t=n(711),a=new e.StudentService,s=new t.AttendanceService,d=document.getElementById("addStudentButton"),i=document.getElementById("updateStudentButton"),o=document.getElementById("takeAttendanceButton"),r=document.getElementById("updateAttendanceButton"),c=document.getElementById("nameInput"),l=document.getElementById("surnameInput"),u=document.getElementById("selectPrayerTime"),h=document.getElementsByName("selectAbsence"),p=document.getElementById("selectListWithAttendanceId"),m=document.getElementById("mySelectStudentId"),f=document.getElementById("studentListBody"),g=document.getElementById("takeAttendanceBody"),y=document.getElementById("listAttendanceBody"),E=document.getElementById("tbodyListForAttendance"),A=document.getElementById("tbodyListWithStudentId");a.fetchStudents().then((()=>{w()}));var S=/^[a-zA-ZğüşıöçĞÜŞİÖÇ ]{3,20}$/,b=/^[a-zA-ZğüşıöçĞÜŞİÖÇ ]{2,20}$/;let v,T;function w(){!async function(){f.innerHTML="",a.getStudents().forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),s=document.createElement("td"),o=document.createElement("td"),r=document.createElement("td"),u=document.createElement("td"),h=document.createElement("td"),p=document.createElement("td"),m=document.createElement("button"),g=document.createElement("button");n.innerHTML=e.id.toString(),s.innerText=e.name,o.innerText=e.surname,r.innerText=e.absent.toString(),m.setAttribute("class","btn btn-danger"),m.setAttribute("id","deleteButton"),m.setAttribute("data-id",e.id.toString()),m.innerHTML='<i class="fas fa-trash-alt"></i>',g.setAttribute("class","btn btn-primary"),g.setAttribute("id","updateButton"),g.setAttribute("data-id",e.id.toString()),g.innerHTML='<i class="fa-solid fa-edit"></i>',u.appendChild(m),h.appendChild(g),t.appendChild(n),t.appendChild(s),t.appendChild(o),t.appendChild(r),p.appendChild(u),p.appendChild(h),p.setAttribute("class","d-flex justify-content-around"),t.appendChild(p),f.appendChild(t),m.addEventListener("click",(async e=>{e.preventDefault(),console.log("Silme"),await a.deleteStudent(Number(m.dataset.id)),w(),alert("Öğrenci Silindi")})),g.addEventListener("click",(t=>{t.preventDefault(),v=e,c.value=v.name,l.value=v.surname,d.style.display="none",i.style.display="block",i.setAttribute("data-id",v.id.toString())}))}))}(),async function(){g.innerHTML="",a.getStudents().forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),s=document.createElement("td"),d=document.createElement("td"),i=document.createElement("select"),o=document.createElement("option"),r=document.createElement("option");n.innerHTML=e.id.toString(),a.innerText=e.name,s.innerText=e.surname,i.setAttribute("class","form-select"),i.setAttribute("name","selectAbsence"),i.setAttribute("aria-label","select example"),o.setAttribute("value","+"),r.setAttribute("value","-"),o.innerText="+",r.innerText="-",i.appendChild(o),i.appendChild(r),d.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(s),t.appendChild(d),g.appendChild(t)}))}(),function(){const e=s.getAttendanceList();p.innerHTML="",e.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e.id.toString()),t.innerText=e.today+" "+e.prayerTime,p.appendChild(t)}))}(),async function(){const e=a.getStudents();m.innerHTML="",e.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e.id.toString()),t.innerText=e.name+" "+e.surname,m.appendChild(t)}))}(),k()}async function k(){y.innerHTML="",s.getAttendanceList().forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),c=document.createElement("td"),l=document.createElement("td"),h=document.createElement("button"),p=document.createElement("button");n.innerHTML=e.id.toString(),a.innerText=e.today,d.innerText=e.prayerTime,h.setAttribute("class","btn btn-danger"),h.setAttribute("id","deleteButton"),h.setAttribute("data-id",e.id.toString()),h.innerHTML='<i class="fas fa-trash-alt"></i>',p.setAttribute("class","btn btn-primary"),p.setAttribute("id","updateButton"),p.setAttribute("data-id",e.id.toString()),p.innerHTML='<i class="fa-solid fa-edit"></i>',i.appendChild(h),c.appendChild(p),t.appendChild(n),t.appendChild(a),t.appendChild(d),l.appendChild(i),l.appendChild(c),l.setAttribute("class","d-flex justify-content-around"),t.appendChild(l),y.appendChild(t),h.addEventListener("click",(async e=>{e.preventDefault(),console.log("Silme"),await s.deleteAttendance(Number(h.dataset.id)),w(),k(),alert("Yoklama Silindi")})),p.addEventListener("click",(t=>{t.preventDefault(),T=e.id,u.value=e.prayerTime,r.style.display="block",o.style.display="none",r.setAttribute("data-id",T.toString())}))}))}d.addEventListener("click",(async e=>{e.preventDefault(),console.log("Ekleme"),S.test(c.value)&&b.test(l.value)?(await a.addStudent(c.value,l.value),w(),alert(c.value+" "+l.value+"\nÖğrenci Eklendi"),c.value="",l.value=""):alert("Talebe ADI ve SOYADI uygun formatta değil\n3-20 karakter arası sadece harf giriniz\nÖrnek: Bektaş Işık")})),i.addEventListener("click",(async e=>{e.preventDefault(),console.log("Güncelleme"),S.test(c.value)&&b.test(l.value)?(await a.updateStudent(v,c.value,l.value),c.value="",l.value="",d.style.display="block",i.style.display="none",w(),alert("Öğrenci Güncellendi")):alert("Talebe ADI ve SOYADI uygun formatta değil\n3-20 karakter arası sadece harf giriniz\nÖrnek: Bektaş Işık")})),o.addEventListener("click",(async e=>{e.preventDefault(),console.log("Yoklama alma");const t=new Map;a.getStudents().forEach(((e,n)=>{t.set(e,"+"===h[n].value)})),""!==u.value?(await s.takeAttendance(u.value,t),w(),alert(u.value+" Yoklaması Alındı")):alert("Lütfen Vakti Seçiniz")})),r.addEventListener("click",(async e=>{e.preventDefault(),console.log("Yoklama güncelleme");const t=new Map;a.getStudents().forEach(((e,n)=>{t.set(e,"+"===h[n].value)})),await s.updateAttendance(T,u.value,t),console.log(s.getAttendanceList()),o.style.display="block",r.style.display="none",w(),alert(u.value+"Yoklaması Güncellendi")})),p.addEventListener("click",(e=>{e.preventDefault(),console.log("Yoklama Seçildi"),async function(e){console.log("Yokalmaya göre Talebe Listeleme"),E.innerHTML="";const t=await s.getAttendancesByAttendanceId(e);console.log(t),t.forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),s=document.createElement("td"),d=document.createElement("td");n.innerHTML=e.getStudent().id.toString(),a.innerHTML=e.getStudent().name,s.innerHTML=e.getStudent().surname,d.innerHTML=e.getIsAbsenceToString(),t.appendChild(n),t.appendChild(a),t.appendChild(s),t.appendChild(d),E.appendChild(t)}))}(Number(p.value)),alert("Seçilen Yoklamanın Öğrencileri Listelendi")})),m.addEventListener("click",(e=>{e.preventDefault(),console.log("Talebe Seçildi"),async function(e){console.log("Talebeye göre Yoklama Listeleme"),A.innerHTML="";const t=await s.getAttendancesByStudentId(e);console.log(t),t.forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),s=document.createElement("td");n.innerHTML=e.getAttendance().today,a.innerHTML=e.getAttendance().prayerTime,s.innerHTML=e.getIsAbsenceToString(),t.appendChild(n),t.appendChild(a),t.appendChild(s),A.appendChild(t)}))}(Number(m.value)),alert("Seçilen Öğrencinin Yoklamaları Listelendi")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1DQUNaZ0YsRUFBdUJPLFVBQVksR0FDbkMsTUFBTWtELFFBQWdDNUUsRUFBa0IrRSwwQkFBMEJ6RyxHQUNsRnBDLFFBQVFDLElBQUl5SSxHQUNaQSxFQUF3Qm5HLFNBQVNKLElBQzdCLE1BQU1zRCxFQUFLeEIsU0FBU3lCLGNBQWMsTUFDNUJvRCxFQUFVN0UsU0FBU3lCLGNBQWMsTUFDakNxQyxFQUFlOUQsU0FBU3lCLGNBQWMsTUFDdENJLEVBQVc3QixTQUFTeUIsY0FBYyxNQUV4Q29ELEVBQVF0RCxVQUFZckQsRUFBa0J2QixnQkFBZ0JyQixNQUN0RHdJLEVBQWF2QyxVQUFZckQsRUFBa0J2QixnQkFBZ0J4QixXQUMzRDBHLEVBQVNOLFVBQVlyRCxFQUFrQnJCLHVCQUV2QzJFLEVBQUdjLFlBQVl1QyxHQUNmckQsRUFBR2MsWUFBWXdCLEdBQ2Z0QyxFQUFHYyxZQUFZVCxHQUNmYixFQUF1QnNCLFlBQVlkLEVBQUcsR0FFOUMsQ0FwT0lzRCxDQUE0Qm5DLE9BQU9oQyxFQUFrQm1DLFFBQ3JERCxNQUFNLDRDQUE0QyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHlzLy4vbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly90eXMvLi9zcmMvZG9tYWluL2F0dGVuZGFuY2UudHMiLCJ3ZWJwYWNrOi8vdHlzLy4vc3JjL2RvbWFpbi9zdHVkZW50LnRzIiwid2VicGFjazovL3R5cy8uL3NyYy9kb21haW4vc3R1ZGVudF9hdHRlbmRhbmNlLnRzIiwid2VicGFjazovL3R5cy8uL3NyYy9zZXJ2aWNlL2F0dGVuZGFuY2Vfc2VydmljZS50cyIsIndlYnBhY2s6Ly90eXMvLi9zcmMvc2VydmljZS9zdHVkZW50X3NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vdHlzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3R5cy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLy8gcmVmOiBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1nbG9iYWxcbnZhciBnZXRHbG9iYWwgPSBmdW5jdGlvbiAoKSB7XG5cdC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xuXHQvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcblx0Ly8gSG93ZXZlciwgdGhpcyBjYXVzZXMgQ1NQIHZpb2xhdGlvbnMgaW4gQ2hyb21lIGFwcHMuXG5cdGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHNlbGY7IH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IHJldHVybiB3aW5kb3c7IH1cblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBnbG9iYWw7IH1cblx0dGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn1cblxudmFyIGdsb2JhbCA9IGdldEdsb2JhbCgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBnbG9iYWwuZmV0Y2g7XG5cbi8vIE5lZWRlZCBmb3IgVHlwZVNjcmlwdCBhbmQgV2VicGFjay5cbmlmIChnbG9iYWwuZmV0Y2gpIHtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZ2xvYmFsLmZldGNoLmJpbmQoZ2xvYmFsKTtcbn1cblxuZXhwb3J0cy5IZWFkZXJzID0gZ2xvYmFsLkhlYWRlcnM7XG5leHBvcnRzLlJlcXVlc3QgPSBnbG9iYWwuUmVxdWVzdDtcbmV4cG9ydHMuUmVzcG9uc2UgPSBnbG9iYWwuUmVzcG9uc2U7IiwiZXhwb3J0IGNsYXNzIEF0dGVuZGFuY2Uge1xuICAgIGlkOiBudW1iZXI7XG4gICAgcHJheWVyVGltZTogc3RyaW5nO1xuICAgIGRhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5ID0gdGhpcy5kYXRlLmdldERhdGUoKSArIFwiL1wiICsgKHRoaXMuZGF0ZS5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpICsgXCIgXCIgKyB0aGlzLmRhdGUuZ2V0SG91cnMoKSArIFwiOlwiICsgdGhpcy5kYXRlLmdldE1pbnV0ZXMoKSArIFwiOlwiICsgdGhpcy5kYXRlLmdldFNlY29uZHMoKTtcblxuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHByYXllclRpbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMucHJheWVyVGltZSA9IHByYXllclRpbWU7XG4gICAgfVxuXG4gICAgc2hvd0luZm9BdHRlbmRhbmNlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmlkICsgXCIgXCIgKyB0aGlzLnByYXllclRpbWUgKyBcIiBcIiArIHRoaXMudG9kYXkpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU3R1ZGVudCB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3VybmFtZTogc3RyaW5nO1xuICAgIGFic2VudDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgbmFtZTogc3RyaW5nLCBzdXJuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnN1cm5hbWUgPSBzdXJuYW1lO1xuICAgICAgICB0aGlzLmFic2VudCA9IDA7XG4gICAgfVxuICAgIGluY3JlYXNlQWJzZW50KCkge1xuICAgICAgICB0aGlzLmFic2VudCA9IHRoaXMuYWJzZW50ICsgMTtcbiAgICB9XG5cbiAgICBzZXROYW1lKG5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cbiAgICBzZXRTdXJuYW1lKHN1cm5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnN1cm5hbWUgPSBzdXJuYW1lO1xuICAgIH1cblxuICAgIHNob3dJbmZvU3R1ZGVudCgpIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lICsgXCIgXCIgKyB0aGlzLnN1cm5hbWUgKyBcIiBcIiArIHRoaXMuYWJzZW50KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdHVkZW50IH0gZnJvbSBcIi4vc3R1ZGVudFwiO1xuaW1wb3J0IHsgQXR0ZW5kYW5jZSB9IGZyb20gXCIuL2F0dGVuZGFuY2VcIjtcbmV4cG9ydCBjbGFzcyBTdHVkZW50QXR0ZW5kYW5jZSB7XG4gICAgc3R1ZGVudDogU3R1ZGVudDtcbiAgICBhdHRlbmRhbmNlOiBBdHRlbmRhbmNlO1xuICAgIGlzQWJzZW5jZTogQm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHN0dWRlbnQ6IFN0dWRlbnQsIGF0dGVuZGFuY2U6IEF0dGVuZGFuY2UsIGlzQWJzZW5jZTogQm9vbGVhbikge1xuICAgICAgICB0aGlzLnN0dWRlbnQgPSBzdHVkZW50O1xuICAgICAgICB0aGlzLmF0dGVuZGFuY2UgPSBhdHRlbmRhbmNlO1xuICAgICAgICB0aGlzLmlzQWJzZW5jZSA9IGlzQWJzZW5jZTtcbiAgICB9XG5cbiAgICBnZXRBdHRlbmRhbmNlKCk6QXR0ZW5kYW5jZXtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0ZW5kYW5jZTtcbiAgICB9XG4gICAgZ2V0U3R1ZGVudCgpOlN0dWRlbnR7XG4gICAgICAgIHJldHVybiB0aGlzLnN0dWRlbnQ7XG4gICAgfVxuXG4gICAgZ2V0SXNBYnNlbmNlVG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBYnNlbmNlID8gXCJWYXJcIiA6IFwiWW9rXCI7XG4gICAgfVxuXG4gICAgc2hvd0luZm9TdHVkZW50QXR0ZW5kYW5jZSgpIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdHVkZW50ICsgXCIgXCIgKyB0aGlzLmF0dGVuZGFuY2UgKyBcIiBcIiArIHRoaXMuZ2V0SXNBYnNlbmNlVG9TdHJpbmcpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBTdHVkZW50IH0gZnJvbSBcIi4uL2RvbWFpbi9zdHVkZW50XCI7XG5pbXBvcnQgeyBBdHRlbmRhbmNlIH0gZnJvbSBcIi4uL2RvbWFpbi9hdHRlbmRhbmNlXCI7XG5pbXBvcnQgeyBTdHVkZW50QXR0ZW5kYW5jZSB9IGZyb20gXCIuLi9kb21haW4vc3R1ZGVudF9hdHRlbmRhbmNlXCI7XG5cbnZhciBhcGlVcmw6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxJztcblxuZXhwb3J0IGNsYXNzIEF0dGVuZGFuY2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9hdHRlbmRhbmNlczogQXJyYXk8QXR0ZW5kYW5jZT4gPSBbXTtcbiAgICBwcml2YXRlIF9zdHVkZW50QXR0ZW5kYW5jZXM6IEFycmF5PFN0dWRlbnRBdHRlbmRhbmNlPiA9IFtdO1xuICAgIHByaXZhdGUgX3NlcXVlbmNlOiBudW1iZXIgPSAxO1xuXG4gICAgZ2V0QXR0ZW5kYW5jZUxpc3QoKTogQXJyYXk8QXR0ZW5kYW5jZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXR0ZW5kYW5jZXM7XG4gICAgfVxuXG4gICAgZ2V0QXR0ZW5kYW5jZShhdHRlbmRhbmNlSWQ6IG51bWJlcik6IEF0dGVuZGFuY2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXR0ZW5kYW5jZXMuZmlsdGVyKFxuICAgICAgICAgICAgKGF0dGVuZGFuY2UpID0+IGF0dGVuZGFuY2UuaWQgPT09IGF0dGVuZGFuY2VJZClbMF07XG4gICAgfVxuXG4gICAgZ2V0U3R1ZGVudEF0dGVuZGFuY2VzKCk6IEFycmF5PFN0dWRlbnRBdHRlbmRhbmNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHVkZW50QXR0ZW5kYW5jZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXR0ZW5kYW5jZXNCeUF0dGVuZGFuY2VJZChhdHRlbmRhbmNlSWQ6IG51bWJlcik6IFByb21pc2U8QXJyYXk8U3R1ZGVudEF0dGVuZGFuY2U+PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsICsgJy9hdHRlbmRhbmNlcy8nICsgYXR0ZW5kYW5jZUlkLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHVkZW50QXR0ZW5kYW5jZXMuZmlsdGVyKFxuICAgICAgICAgICAgKHN0dWRlbnRBdHRlbmRhbmNlKSA9PlxuICAgICAgICAgICAgICAgIHN0dWRlbnRBdHRlbmRhbmNlLmdldEF0dGVuZGFuY2UoKS5pZCA9PT0gYXR0ZW5kYW5jZUlkKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBdHRlbmRhbmNlc0J5U3R1ZGVudElkKHN0dWRlbnRJZDogbnVtYmVyKTogUHJvbWlzZTxBcnJheTxTdHVkZW50QXR0ZW5kYW5jZT4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwgKyAnL2F0dGVuZGFuY2VzLycgKyBzdHVkZW50SWQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0IGlzOiAnLCBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0dWRlbnRBdHRlbmRhbmNlcy5maWx0ZXIoXG4gICAgICAgICAgICAoc3R1ZGVudEF0dGVuZGFuY2UpID0+IHN0dWRlbnRBdHRlbmRhbmNlLmdldFN0dWRlbnQoKS5pZCA9PT0gc3R1ZGVudElkKTtcbiAgICB9XG5cbiAgICBhc3luYyB0YWtlQXR0ZW5kYW5jZShwcmF5ZXJUaW1lOiBzdHJpbmcsIGF0dGVuZGFuY2VNYXA6IE1hcDxTdHVkZW50LCBib29sZWFuPikge1xuICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gbmV3IEF0dGVuZGFuY2UodGhpcy5fc2VxdWVuY2UrKywgcHJheWVyVGltZSk7XG4gICAgICAgIGF0dGVuZGFuY2VNYXAuZm9yRWFjaChhc3luYyAoaXNBYnNlbmNlLCBzdHVkZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHVkZW50QXR0ZW5kYW5jZSA9IG5ldyBTdHVkZW50QXR0ZW5kYW5jZShzdHVkZW50LCBhdHRlbmRhbmNlLCBpc0Fic2VuY2UpO1xuICAgICAgICAgICAgaWYgKCFpc0Fic2VuY2UpIHtcbiAgICAgICAgICAgICAgICBzdHVkZW50LmluY3JlYXNlQWJzZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdHVkZW50QXR0ZW5kYW5jZXMucHVzaChzdHVkZW50QXR0ZW5kYW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvYXR0ZW5kYW5jZXMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLl9zZXF1ZW5jZSxcbiAgICAgICAgICAgICAgICBwcmF5ZXJUaW1lOiBwcmF5ZXJUaW1lLFxuICAgICAgICAgICAgICAgIGF0dGVuZGFuY2VNYXA6IGF0dGVuZGFuY2VNYXBcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIHRoaXMuX2F0dGVuZGFuY2VzLnB1c2goYXR0ZW5kYW5jZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlQXR0ZW5kYW5jZShhdHRlbmRhbmNlSWQ6IG51bWJlciwgcHJheWVyVGltZTogc3RyaW5nLCBhdHRlbmRhbmNlTWFwOiBNYXA8U3R1ZGVudCwgYm9vbGVhbj4pIHtcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IHRoaXMuZ2V0QXR0ZW5kYW5jZShhdHRlbmRhbmNlSWQpO1xuXG4gICAgICAgIGlmIChhdHRlbmRhbmNlKSB7XG4gICAgICAgICAgICBhdHRlbmRhbmNlLnByYXllclRpbWUgPSBwcmF5ZXJUaW1lO1xuICAgICAgICAgICAgdGhpcy5fc3R1ZGVudEF0dGVuZGFuY2VzID0gdGhpcy5fc3R1ZGVudEF0dGVuZGFuY2VzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoc3R1ZGVudEF0dGVuZGFuY2UpID0+IHN0dWRlbnRBdHRlbmRhbmNlLmdldEF0dGVuZGFuY2UoKS5pZCAhPT0gYXR0ZW5kYW5jZUlkKTtcbiAgICAgICAgICAgIGF0dGVuZGFuY2VNYXAuZm9yRWFjaChhc3luYyAoaXNBYnNlbmNlLCBzdHVkZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudEF0dGVuZGFuY2UgPSBuZXcgU3R1ZGVudEF0dGVuZGFuY2Uoc3R1ZGVudCwgYXR0ZW5kYW5jZSwgaXNBYnNlbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWJzZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBzdHVkZW50LmluY3JlYXNlQWJzZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3N0dWRlbnRBdHRlbmRhbmNlcy5wdXNoKHN0dWRlbnRBdHRlbmRhbmNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsICsgJy9hdHRlbmRhbmNlcy8nICsgYXR0ZW5kYW5jZUlkLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgaWQ6IGF0dGVuZGFuY2VJZCxcbiAgICAgICAgICAgICAgICBwcmF5ZXJUaW1lOiBwcmF5ZXJUaW1lLFxuICAgICAgICAgICAgICAgIGF0dGVuZGFuY2VNYXA6IGF0dGVuZGFuY2VNYXBcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBhc3luYyBkZWxldGVBdHRlbmRhbmNlKGF0dGVuZGFuY2VJZDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSB0aGlzLmdldEF0dGVuZGFuY2UoYXR0ZW5kYW5jZUlkKTtcbiAgICAgICAgaWYgKGF0dGVuZGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2F0dGVuZGFuY2VzID0gdGhpcy5fYXR0ZW5kYW5jZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChhdHRlbmRhbmNlKSA9PiBhdHRlbmRhbmNlLmlkICE9PSBhdHRlbmRhbmNlSWQpO1xuICAgICAgICAgICAgdGhpcy5fc3R1ZGVudEF0dGVuZGFuY2VzID0gdGhpcy5fc3R1ZGVudEF0dGVuZGFuY2VzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoc3R1ZGVudEF0dGVuZGFuY2UpID0+IHN0dWRlbnRBdHRlbmRhbmNlLmdldEF0dGVuZGFuY2UoKS5pZCAhPT0gYXR0ZW5kYW5jZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvYXR0ZW5kYW5jZXMvJyArIGF0dGVuZGFuY2VJZCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGlkOiBhdHRlbmRhbmNlSWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3N0dWRlbnRcIjtcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcblxudmFyIGFwaVVybDogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEnO1xuXG5leHBvcnQgY2xhc3MgU3R1ZGVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3N0dWRlbnRzOiBTdHVkZW50W10gPSBbXTtcbiAgICBwcml2YXRlIF9zZXF1ZW5jZTogbnVtYmVyID0gMDtcblxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hTdHVkZW50cygpOiBQcm9taXNlPFN0dWRlbnRbXT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCArICcvc3R1ZGVudHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgcmVzdWx0LmZvckVhY2goKG9iamVjdDogYW55KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zdHVkZW50cy5wdXNoKG5ldyBTdHVkZW50KG9iamVjdC5pZCwgb2JqZWN0Lm5hbWUsIG9iamVjdC5zdXJuYW1lKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZXF1ZW5jZSA9IHRoaXMuX3N0dWRlbnRzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0dWRlbnRzO1xuICAgIH1cblxuICAgIGdldFN0dWRlbnRzKCk6IEFycmF5PFN0dWRlbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0dWRlbnRzO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFN0dWRlbnQobmFtZTogc3RyaW5nLCBzdXJuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwgKyAnL3N0dWRlbnRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuX3NlcXVlbmNlKyssXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBzdXJuYW1lOiBzdXJuYW1lLFxuICAgICAgICAgICAgICAgIGFic2VudDogMFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQgaXM6ICcsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICBjb25zdCBzdHVkZW50ID0gbmV3IFN0dWRlbnQodGhpcy5fc2VxdWVuY2UsIG5hbWUsIHN1cm5hbWUpO1xuICAgICAgICB0aGlzLl9zdHVkZW50cy5wdXNoKHN0dWRlbnQpO1xuICAgIH1cblxuICAgIGdldFN0dWRlbnQoc3R1ZGVudElkOiBudW1iZXIpOiBTdHVkZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgd2luZG93LmZldGNoKGFwaVVybCArICcvc3R1ZGVudHMvJyArIHN0dWRlbnRJZCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oanNvbiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coanNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy5fc3R1ZGVudHMuZmluZChzdHVkZW50ID0+IHN0dWRlbnQuaWQgPT09IHN0dWRlbnRJZCk7XG4gICAgfVxuXG4gICAgZ2V0U3R1ZGVudEJ5SWQoc3R1ZGVudElkOiBudW1iZXIpOiBTdHVkZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0dWRlbnRzLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBzdHVkZW50SWQpO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVN0dWRlbnQoc3R1ZGVudDogU3R1ZGVudCwgbmFtZTogc3RyaW5nLCBzdXJuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwgKyAnL3N0dWRlbnRzLycgKyBzdHVkZW50LmlkLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgc3VybmFtZTogc3VybmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQgaXM6ICcsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICBzdHVkZW50Lm5hbWUgPSBuYW1lO1xuICAgICAgICBzdHVkZW50LnN1cm5hbWUgPSBzdXJuYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZVN0dWRlbnQoc3R1ZGVudElkOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwgKyAnL3N0dWRlbnRzLycgKyBzdHVkZW50SWQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCBpczogJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIGNvbnN0IHN0dWRlbnRzID0gdGhpcy5fc3R1ZGVudHMuZmlsdGVyKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCAhPT0gc3R1ZGVudElkKTtcbiAgICAgICAgdGhpcy5fc3R1ZGVudHMgPSBzdHVkZW50cztcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVTdHVkZW50V2l0aElkKHN0dWRlbnRJZDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsICsgJy9zdHVkZW50cy8nICsgc3R1ZGVudElkLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQgaXM6ICcsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICBjb25zdCBzdHVkZW50cyA9IHRoaXMuX3N0dWRlbnRzLmZpbHRlcihzdHVkZW50ID0+IHN0dWRlbnQuaWQgIT09IHN0dWRlbnRJZCk7XG4gICAgICAgIHRoaXMuX3N0dWRlbnRzID0gc3R1ZGVudHM7XG4gICAgfVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IFN0dWRlbnRTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zdHVkZW50X3NlcnZpY2VcIjtcbmltcG9ydCB7IEF0dGVuZGFuY2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9hdHRlbmRhbmNlX3NlcnZpY2VcIjtcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9kb21haW4vc3R1ZGVudFwiO1xuXG5jb25zdCBzdHVkZW50U2VydmljZSA9IG5ldyBTdHVkZW50U2VydmljZSgpO1xuY29uc3QgYXR0ZW5kYW5jZVNlcnZpY2UgPSBuZXcgQXR0ZW5kYW5jZVNlcnZpY2UoKTtcblxuY29uc3QgYWRkU3R1ZGVudEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkU3R1ZGVudEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IHVwZGF0ZVN0dWRlbnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwZGF0ZVN0dWRlbnRCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5jb25zdCB0YWtlQXR0ZW5kYW5jZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFrZUF0dGVuZGFuY2VCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5jb25zdCB1cGRhdGVBdHRlbmRhbmNlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cGRhdGVBdHRlbmRhbmNlQnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWVJbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3Qgc3VybmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdXJuYW1lSW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcblxuY29uc3Qgc2VsZWN0UHJheWVyVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0UHJheWVyVGltZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3Qgc2VsZWN0TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKFwic2VsZWN0QWJzZW5jZVwiKSBhcyBOb2RlTGlzdE9mPEhUTUxTZWxlY3RFbGVtZW50PjtcbmNvbnN0IG15U2VsZWN0QXR0ZW5kYW5jZUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWxlY3RMaXN0V2l0aEF0dGVuZGFuY2VJZFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3QgbXlTZWxlY3RTdHVkZW50SWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15U2VsZWN0U3R1ZGVudElkXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbmNvbnN0IHN0dWRlbnRUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R1ZGVudExpc3RCb2R5XCIpIGFzIEhUTUxUYWJsZUVsZW1lbnQ7XG5jb25zdCB0YWtlQXR0ZW5kYW5jZVRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YWtlQXR0ZW5kYW5jZUJvZHlcIikgYXMgSFRNTFRhYmxlRWxlbWVudDtcbmNvbnN0IGxpc3RBdHRlbmRhbmNlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdEF0dGVuZGFuY2VCb2R5XCIpIGFzIEhUTUxUYWJsZUVsZW1lbnQ7XG5jb25zdCB0Ym9keUxpc3RGb3JBdHRlbmRhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0Ym9keUxpc3RGb3JBdHRlbmRhbmNlXCIpIGFzIEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xuY29uc3QgdGJvZHlMaXN0V2l0aFN0dWRlbnRJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGJvZHlMaXN0V2l0aFN0dWRlbnRJZFwiKSBhcyBIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcblxuc3R1ZGVudFNlcnZpY2UuZmV0Y2hTdHVkZW50cygpLnRoZW4oKCkgPT4ge1xuICAgIHNob3dMaXN0cygpO1xufSk7XG5cbnZhciByZWdOYW1lID0gL15bYS16QS1axJ/DvMWfxLHDtsOnxJ7DnMWexLDDlsOHIF17MywyMH0kLztcbnZhciByZWdTdXJuYW1lID0gL15bYS16QS1axJ/DvMWfxLHDtsOnxJ7DnMWexLDDlsOHIF17MiwyMH0kLztcbmxldCBzZWxlY3RlZFN0dWRlbnQ6IFN0dWRlbnQ7XG5sZXQgc2VsZWN0ZWRBdHRlbmRhbmNlSWQ6IG51bWJlcjtcblxuXG5hZGRTdHVkZW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhcIkVrbGVtZVwiKTtcbiAgICBpZiAocmVnTmFtZS50ZXN0KG5hbWVJbnB1dC52YWx1ZSkgJiYgcmVnU3VybmFtZS50ZXN0KHN1cm5hbWVJbnB1dC52YWx1ZSkpIHtcbiAgICAgICAgYXdhaXQgc3R1ZGVudFNlcnZpY2UuYWRkU3R1ZGVudChuYW1lSW5wdXQudmFsdWUsIHN1cm5hbWVJbnB1dC52YWx1ZSk7XG4gICAgICAgIHNob3dMaXN0cygpO1xuICAgICAgICBhbGVydChuYW1lSW5wdXQudmFsdWUgKyBcIiBcIiArIHN1cm5hbWVJbnB1dC52YWx1ZSArIFwiXFxuw5bEn3JlbmNpIEVrbGVuZGlcIik7XG4gICAgICAgIG5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHN1cm5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoXCJUYWxlYmUgQURJIHZlIFNPWUFESSB1eWd1biBmb3JtYXR0YSBkZcSfaWxcXG4zLTIwIGthcmFrdGVyIGFyYXPEsSBzYWRlY2UgaGFyZiBnaXJpbml6XFxuw5ZybmVrOiBCZWt0YcWfIEnFn8Sxa1wiKTtcbiAgICB9XG59KTtcblxudXBkYXRlU3R1ZGVudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coXCJHw7xuY2VsbGVtZVwiKTtcbiAgICBpZiAocmVnTmFtZS50ZXN0KG5hbWVJbnB1dC52YWx1ZSkgJiYgcmVnU3VybmFtZS50ZXN0KHN1cm5hbWVJbnB1dC52YWx1ZSkpIHtcbiAgICAgICAgYXdhaXQgc3R1ZGVudFNlcnZpY2UudXBkYXRlU3R1ZGVudChzZWxlY3RlZFN0dWRlbnQsIG5hbWVJbnB1dC52YWx1ZSwgc3VybmFtZUlucHV0LnZhbHVlKTtcbiAgICAgICAgbmFtZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgc3VybmFtZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgYWRkU3R1ZGVudEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB1cGRhdGVTdHVkZW50QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgc2hvd0xpc3RzKCk7XG4gICAgICAgIGFsZXJ0KFwiw5bEn3JlbmNpIEfDvG5jZWxsZW5kaVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChcIlRhbGViZSBBREkgdmUgU09ZQURJIHV5Z3VuIGZvcm1hdHRhIGRlxJ9pbFxcbjMtMjAga2FyYWt0ZXIgYXJhc8SxIHNhZGVjZSBoYXJmIGdpcmluaXpcXG7DlnJuZWs6IEJla3RhxZ8gScWfxLFrXCIpO1xuICAgIH1cbn0pO1xuXG50YWtlQXR0ZW5kYW5jZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coXCJZb2tsYW1hIGFsbWFcIik7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIHN0dWRlbnRTZXJ2aWNlLmdldFN0dWRlbnRzKCkuZm9yRWFjaCgoc3R1ZGVudDogU3R1ZGVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBtYXAuc2V0KHN0dWRlbnQsIHNlbGVjdExpc3RbaW5kZXhdLnZhbHVlID09PSBcIitcIik7XG4gICAgfSk7XG4gICAgaWYgKCEoc2VsZWN0UHJheWVyVGltZS52YWx1ZSA9PT0gXCJcIikpIHtcbiAgICAgICAgYXdhaXQgYXR0ZW5kYW5jZVNlcnZpY2UudGFrZUF0dGVuZGFuY2Uoc2VsZWN0UHJheWVyVGltZS52YWx1ZSwgbWFwKTtcbiAgICAgICAgc2hvd0xpc3RzKCk7XG4gICAgICAgIGFsZXJ0KHNlbGVjdFByYXllclRpbWUudmFsdWUgKyBcIiBZb2tsYW1hc8SxIEFsxLFuZMSxXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiTMO8dGZlbiBWYWt0aSBTZcOnaW5pelwiKTtcbiAgICB9XG5cbn0pO1xuXG51cGRhdGVBdHRlbmRhbmNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhcIllva2xhbWEgZ8O8bmNlbGxlbWVcIik7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIHN0dWRlbnRTZXJ2aWNlLmdldFN0dWRlbnRzKCkuZm9yRWFjaCgoc3R1ZGVudDogU3R1ZGVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBtYXAuc2V0KHN0dWRlbnQsIHNlbGVjdExpc3RbaW5kZXhdLnZhbHVlID09PSBcIitcIik7XG4gICAgfSlcbiAgICBhd2FpdCBhdHRlbmRhbmNlU2VydmljZS51cGRhdGVBdHRlbmRhbmNlKHNlbGVjdGVkQXR0ZW5kYW5jZUlkLCBzZWxlY3RQcmF5ZXJUaW1lLnZhbHVlLCBtYXApO1xuICAgIGNvbnNvbGUubG9nKGF0dGVuZGFuY2VTZXJ2aWNlLmdldEF0dGVuZGFuY2VMaXN0KCkpO1xuICAgIHRha2VBdHRlbmRhbmNlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgdXBkYXRlQXR0ZW5kYW5jZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgc2hvd0xpc3RzKCk7XG4gICAgYWxlcnQoc2VsZWN0UHJheWVyVGltZS52YWx1ZSArIFwiWW9rbGFtYXPEsSBHw7xuY2VsbGVuZGlcIik7XG59KTtcblxubXlTZWxlY3RBdHRlbmRhbmNlSWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKFwiWW9rbGFtYSBTZcOnaWxkaVwiKTtcbiAgICBsaXN0U3R1ZGVudHNXaXRoQXR0ZW5kYW5jZUlkKE51bWJlcihteVNlbGVjdEF0dGVuZGFuY2VJZC52YWx1ZSkpO1xuICAgIGFsZXJ0KFwiU2XDp2lsZW4gWW9rbGFtYW7EsW4gw5bEn3JlbmNpbGVyaSBMaXN0ZWxlbmRpXCIpO1xufSk7XG5cbm15U2VsZWN0U3R1ZGVudElkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhcIlRhbGViZSBTZcOnaWxkaVwiKTtcbiAgICBsaXN0QXR0ZW5kYW5jZVdpdGhTdHVkZW50SWQoTnVtYmVyKG15U2VsZWN0U3R1ZGVudElkLnZhbHVlKSk7XG4gICAgYWxlcnQoXCJTZcOnaWxlbiDDlsSfcmVuY2luaW4gWW9rbGFtYWxhcsSxIExpc3RlbGVuZGlcIik7XG59KTtcblxuXG5mdW5jdGlvbiBzaG93TGlzdHMoKSB7XG4gICAgc2hvd1N0dWRlbnRMaXN0KCk7XG4gICAgc2hvd0F0dGVuZGFuY2VMaXN0KCk7XG4gICAgbGlzdEF0dGVuZGFuY2VGb3JTdHVkZW50cygpO1xuICAgIGxpc3RTdHVkZW50c0ZvckF0dGVuZGFuY2UoKTtcbiAgICBsaXN0QXR0ZW5kYW5jZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzaG93U3R1ZGVudExpc3QoKSB7XG4gICAgc3R1ZGVudFRhYmxlLmlubmVySFRNTCA9IFwiXCI7XG4gICAgc3R1ZGVudFNlcnZpY2UuZ2V0U3R1ZGVudHMoKS5mb3JFYWNoKChzdHVkZW50OiBTdHVkZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgICBjb25zdCB0ZElkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkU3VybmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGRBYnNlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZFVwZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cbiAgICAgICAgdGRJZC5pbm5lckhUTUwgPSBzdHVkZW50LmlkLnRvU3RyaW5nKCk7XG4gICAgICAgIHRkTmFtZS5pbm5lclRleHQgPSBzdHVkZW50Lm5hbWU7XG4gICAgICAgIHRkU3VybmFtZS5pbm5lclRleHQgPSBzdHVkZW50LnN1cm5hbWU7XG4gICAgICAgIHRkQWJzZW50LmlubmVyVGV4dCA9IHN0dWRlbnQuYWJzZW50LnRvU3RyaW5nKCk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJ0biBidG4tZGFuZ2VyXCIpO1xuICAgICAgICBkZWxldGVCdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkZWxldGVCdXR0b25cIik7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHN0dWRlbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0XCI+PC9pPic7XG4gICAgICAgIHVwZGF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJ0biBidG4tcHJpbWFyeVwiKTtcbiAgICAgICAgdXBkYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidXBkYXRlQnV0dG9uXCIpO1xuICAgICAgICB1cGRhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBzdHVkZW50LmlkLnRvU3RyaW5nKCkpO1xuICAgICAgICB1cGRhdGVCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEtc29saWQgZmEtZWRpdFwiPjwvaT4nO1xuICAgICAgICB0ZERlbGV0ZS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICB0ZFVwZGF0ZS5hcHBlbmRDaGlsZCh1cGRhdGVCdXR0b24pO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZElkKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGROYW1lKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRTdXJuYW1lKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRBYnNlbnQpO1xuICAgICAgICB0ZEJ1dHRvbi5hcHBlbmRDaGlsZCh0ZERlbGV0ZSk7XG4gICAgICAgIHRkQnV0dG9uLmFwcGVuZENoaWxkKHRkVXBkYXRlKTtcbiAgICAgICAgdGRCdXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJkLWZsZXgganVzdGlmeS1jb250ZW50LWFyb3VuZFwiKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRCdXR0b24pO1xuICAgICAgICBzdHVkZW50VGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2lsbWVcIik7XG4gICAgICAgICAgICBhd2FpdCBzdHVkZW50U2VydmljZS5kZWxldGVTdHVkZW50KE51bWJlcihkZWxldGVCdXR0b24uZGF0YXNldC5pZCkpO1xuICAgICAgICAgICAgc2hvd0xpc3RzKCk7XG4gICAgICAgICAgICBhbGVydChcIsOWxJ9yZW5jaSBTaWxpbmRpXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdXBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2VsZWN0ZWRTdHVkZW50ID0gc3R1ZGVudDtcbiAgICAgICAgICAgIG5hbWVJbnB1dC52YWx1ZSA9IHNlbGVjdGVkU3R1ZGVudC5uYW1lO1xuICAgICAgICAgICAgc3VybmFtZUlucHV0LnZhbHVlID0gc2VsZWN0ZWRTdHVkZW50LnN1cm5hbWU7XG4gICAgICAgICAgICBhZGRTdHVkZW50QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHVwZGF0ZVN0dWRlbnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIHVwZGF0ZVN0dWRlbnRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBzZWxlY3RlZFN0dWRlbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gc2hvd0F0dGVuZGFuY2VMaXN0KCkge1xuICAgIHRha2VBdHRlbmRhbmNlVGFibGUuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBzdHVkZW50U2VydmljZS5nZXRTdHVkZW50cygpLmZvckVhY2goKHN0dWRlbnQ6IHsgaWQ6IHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZzsgfTsgbmFtZTogc3RyaW5nOyBzdXJuYW1lOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICAgIGNvbnN0IHRkSWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGRTdXJuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgIGNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXG4gICAgICAgIHRkSWQuaW5uZXJIVE1MID0gc3R1ZGVudC5pZC50b1N0cmluZygpO1xuICAgICAgICB0ZE5hbWUuaW5uZXJUZXh0ID0gc3R1ZGVudC5uYW1lO1xuICAgICAgICB0ZFN1cm5hbWUuaW5uZXJUZXh0ID0gc3R1ZGVudC5zdXJuYW1lO1xuICAgICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJmb3JtLXNlbGVjdFwiKTtcbiAgICAgICAgc2VsZWN0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJzZWxlY3RBYnNlbmNlXCIpO1xuICAgICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcInNlbGVjdCBleGFtcGxlXCIpO1xuICAgICAgICBvcHRpb24xLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiK1wiKTtcbiAgICAgICAgb3B0aW9uMi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIi1cIik7XG4gICAgICAgIG9wdGlvbjEuaW5uZXJUZXh0ID0gXCIrXCI7XG4gICAgICAgIG9wdGlvbjIuaW5uZXJUZXh0ID0gXCItXCI7XG5cbiAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEpO1xuICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMik7XG4gICAgICAgIHRkT3B0aW9uLmFwcGVuZENoaWxkKHNlbGVjdCk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkSWQpO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZE5hbWUpO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZFN1cm5hbWUpO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZE9wdGlvbik7XG4gICAgICAgIHRha2VBdHRlbmRhbmNlVGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICAgIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gbGlzdEF0dGVuZGFuY2UoKSB7XG4gICAgbGlzdEF0dGVuZGFuY2VCb2R5LmlubmVySFRNTCA9IFwiXCI7XG4gICAgYXR0ZW5kYW5jZVNlcnZpY2UuZ2V0QXR0ZW5kYW5jZUxpc3QoKS5mb3JFYWNoKChhdHRlbmRhbmNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgICBjb25zdCB0ZElkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkUHJheWVyVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGREZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkVXBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgY29uc3QgdXBkYXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICAgICAgICB0ZElkLmlubmVySFRNTCA9IGF0dGVuZGFuY2UuaWQudG9TdHJpbmcoKTtcbiAgICAgICAgdGREYXRlLmlubmVyVGV4dCA9IGF0dGVuZGFuY2UudG9kYXk7XG4gICAgICAgIHRkUHJheWVyVGltZS5pbm5lclRleHQgPSBhdHRlbmRhbmNlLnByYXllclRpbWU7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJ0biBidG4tZGFuZ2VyXCIpO1xuICAgICAgICBkZWxldGVCdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkZWxldGVCdXR0b25cIik7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGF0dGVuZGFuY2UuaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0XCI+PC9pPic7XG4gICAgICAgIHVwZGF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJ0biBidG4tcHJpbWFyeVwiKTtcbiAgICAgICAgdXBkYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidXBkYXRlQnV0dG9uXCIpO1xuICAgICAgICB1cGRhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBhdHRlbmRhbmNlLmlkLnRvU3RyaW5nKCkpO1xuICAgICAgICB1cGRhdGVCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEtc29saWQgZmEtZWRpdFwiPjwvaT4nO1xuICAgICAgICB0ZERlbGV0ZS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICB0ZFVwZGF0ZS5hcHBlbmRDaGlsZCh1cGRhdGVCdXR0b24pO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZElkKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGREYXRlKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRQcmF5ZXJUaW1lKTtcbiAgICAgICAgdGRCdXR0b24uYXBwZW5kQ2hpbGQodGREZWxldGUpO1xuICAgICAgICB0ZEJ1dHRvbi5hcHBlbmRDaGlsZCh0ZFVwZGF0ZSk7XG4gICAgICAgIHRkQnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZC1mbGV4IGp1c3RpZnktY29udGVudC1hcm91bmRcIik7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkQnV0dG9uKTtcbiAgICAgICAgbGlzdEF0dGVuZGFuY2VCb2R5LmFwcGVuZENoaWxkKHRyKTtcblxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNpbG1lXCIpO1xuICAgICAgICAgICAgYXdhaXQgYXR0ZW5kYW5jZVNlcnZpY2UuZGVsZXRlQXR0ZW5kYW5jZShOdW1iZXIoZGVsZXRlQnV0dG9uLmRhdGFzZXQuaWQpKTtcbiAgICAgICAgICAgIHNob3dMaXN0cygpO1xuICAgICAgICAgICAgbGlzdEF0dGVuZGFuY2UoKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiWW9rbGFtYSBTaWxpbmRpXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdXBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2VsZWN0ZWRBdHRlbmRhbmNlSWQgPSBhdHRlbmRhbmNlLmlkO1xuICAgICAgICAgICAgc2VsZWN0UHJheWVyVGltZS52YWx1ZSA9IGF0dGVuZGFuY2UucHJheWVyVGltZTtcbiAgICAgICAgICAgIHVwZGF0ZUF0dGVuZGFuY2VCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIHRha2VBdHRlbmRhbmNlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHVwZGF0ZUF0dGVuZGFuY2VCdXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBzZWxlY3RlZEF0dGVuZGFuY2VJZC50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8qIFNlw6dpbGVuIHlva2xhbWEgbGlzdGVzaW5pbmluIHRhbGViZWxlcmluaSBnw7ZzdGVyaXIuICovXG5mdW5jdGlvbiBsaXN0QXR0ZW5kYW5jZUZvclN0dWRlbnRzKCkge1xuICAgIGNvbnN0IGF0dGVuZGFuY2VMaXN0ID0gYXR0ZW5kYW5jZVNlcnZpY2UuZ2V0QXR0ZW5kYW5jZUxpc3QoKTtcbiAgICBteVNlbGVjdEF0dGVuZGFuY2VJZC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGF0dGVuZGFuY2VMaXN0LmZvckVhY2goKGF0dGVuZGFuY2UpID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGF0dGVuZGFuY2UuaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBhdHRlbmRhbmNlLnRvZGF5ICsgXCIgXCIgKyBhdHRlbmRhbmNlLnByYXllclRpbWU7XG4gICAgICAgIG15U2VsZWN0QXR0ZW5kYW5jZUlkLmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgfSk7XG5cbn1cblxuXG5hc3luYyBmdW5jdGlvbiBsaXN0U3R1ZGVudHNXaXRoQXR0ZW5kYW5jZUlkKGF0dGVuZGFuY2VJZDogbnVtYmVyKSB7XG4gICAgY29uc29sZS5sb2coXCJZb2thbG1heWEgZ8O2cmUgVGFsZWJlIExpc3RlbGVtZVwiKTtcbiAgICB0Ym9keUxpc3RGb3JBdHRlbmRhbmNlLmlubmVySFRNTCA9IFwiXCI7XG4gICAgY29uc3Qgc3R1ZGVudEF0dGVuZGFuY2VGaWx0ZXIgPSBhd2FpdCBhdHRlbmRhbmNlU2VydmljZS5nZXRBdHRlbmRhbmNlc0J5QXR0ZW5kYW5jZUlkKGF0dGVuZGFuY2VJZCk7XG4gICAgY29uc29sZS5sb2coc3R1ZGVudEF0dGVuZGFuY2VGaWx0ZXIpO1xuICAgIHN0dWRlbnRBdHRlbmRhbmNlRmlsdGVyLmZvckVhY2goKHN0dWRlbnRBdHRlbmRhbmNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgICBjb25zdCB0ZElkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjb25zdCB0ZE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkU3VybmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGRBYnNlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG5cbiAgICAgICAgdGRJZC5pbm5lckhUTUwgPSBzdHVkZW50QXR0ZW5kYW5jZS5nZXRTdHVkZW50KCkuaWQudG9TdHJpbmcoKTtcbiAgICAgICAgdGROYW1lLmlubmVySFRNTCA9IHN0dWRlbnRBdHRlbmRhbmNlLmdldFN0dWRlbnQoKS5uYW1lO1xuICAgICAgICB0ZFN1cm5hbWUuaW5uZXJIVE1MID0gc3R1ZGVudEF0dGVuZGFuY2UuZ2V0U3R1ZGVudCgpLnN1cm5hbWU7XG4gICAgICAgIHRkQWJzZW50LmlubmVySFRNTCA9IHN0dWRlbnRBdHRlbmRhbmNlLmdldElzQWJzZW5jZVRvU3RyaW5nKCk7XG5cbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRJZCk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkTmFtZSk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkU3VybmFtZSk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkQWJzZW50KTtcbiAgICAgICAgdGJvZHlMaXN0Rm9yQXR0ZW5kYW5jZS5hcHBlbmRDaGlsZCh0cik7XG4gICAgfSk7XG59XG5cbi8qIFNlw6dpbGVuIMO2xJ9yZW5jaW5pbiB5b2tsYW1hIGxpc3Rlc2luaSBnw7ZzdGVyaXIuICovXG5hc3luYyBmdW5jdGlvbiBsaXN0U3R1ZGVudHNGb3JBdHRlbmRhbmNlKCkge1xuICAgIGNvbnN0IHN0dWRlbnRMaXN0ID0gc3R1ZGVudFNlcnZpY2UuZ2V0U3R1ZGVudHMoKTtcbiAgICBteVNlbGVjdFN0dWRlbnRJZC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHN0dWRlbnRMaXN0LmZvckVhY2goKHN0dWRlbnQpID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHN0dWRlbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBzdHVkZW50Lm5hbWUgKyBcIiBcIiArIHN0dWRlbnQuc3VybmFtZTtcbiAgICAgICAgbXlTZWxlY3RTdHVkZW50SWQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9KTtcblxufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0QXR0ZW5kYW5jZVdpdGhTdHVkZW50SWQoc3R1ZGVudElkOiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmxvZyhcIlRhbGViZXllIGfDtnJlIFlva2xhbWEgTGlzdGVsZW1lXCIpO1xuICAgIHRib2R5TGlzdFdpdGhTdHVkZW50SWQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBjb25zdCBzdHVkZW50QXR0ZW5kYW5jZUZpbHRlciA9IGF3YWl0IGF0dGVuZGFuY2VTZXJ2aWNlLmdldEF0dGVuZGFuY2VzQnlTdHVkZW50SWQoc3R1ZGVudElkKTtcbiAgICBjb25zb2xlLmxvZyhzdHVkZW50QXR0ZW5kYW5jZUZpbHRlcik7XG4gICAgc3R1ZGVudEF0dGVuZGFuY2VGaWx0ZXIuZm9yRWFjaCgoc3R1ZGVudEF0dGVuZGFuY2UpID0+IHtcbiAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICAgIGNvbnN0IHRkVG9kYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNvbnN0IHRkUHJheWVyVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY29uc3QgdGRBYnNlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG5cbiAgICAgICAgdGRUb2RheS5pbm5lckhUTUwgPSBzdHVkZW50QXR0ZW5kYW5jZS5nZXRBdHRlbmRhbmNlKCkudG9kYXk7XG4gICAgICAgIHRkUHJheWVyVGltZS5pbm5lckhUTUwgPSBzdHVkZW50QXR0ZW5kYW5jZS5nZXRBdHRlbmRhbmNlKCkucHJheWVyVGltZTtcbiAgICAgICAgdGRBYnNlbnQuaW5uZXJIVE1MID0gc3R1ZGVudEF0dGVuZGFuY2UuZ2V0SXNBYnNlbmNlVG9TdHJpbmcoKTtcblxuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZFRvZGF5KTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRQcmF5ZXJUaW1lKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRBYnNlbnQpO1xuICAgICAgICB0Ym9keUxpc3RXaXRoU3R1ZGVudElkLmFwcGVuZENoaWxkKHRyKTtcbiAgICB9KTtcbn0iXSwibmFtZXMiOlsiZ2xvYmFsIiwic2VsZiIsIndpbmRvdyIsIkVycm9yIiwiZ2V0R2xvYmFsIiwibW9kdWxlIiwiZXhwb3J0cyIsImZldGNoIiwiYmluZCIsIkhlYWRlcnMiLCJSZXF1ZXN0IiwiUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsImlkIiwicHJheWVyVGltZSIsImRhdGUiLCJEYXRlIiwidG9kYXkiLCJ0aGlzIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwic2hvd0luZm9BdHRlbmRhbmNlIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJzdXJuYW1lIiwiYWJzZW50IiwiaW5jcmVhc2VBYnNlbnQiLCJzZXROYW1lIiwic2V0U3VybmFtZSIsInNob3dJbmZvU3R1ZGVudCIsInN0dWRlbnQiLCJhdHRlbmRhbmNlIiwiaXNBYnNlbmNlIiwiZ2V0QXR0ZW5kYW5jZSIsImdldFN0dWRlbnQiLCJnZXRJc0Fic2VuY2VUb1N0cmluZyIsInNob3dJbmZvU3R1ZGVudEF0dGVuZGFuY2UiLCJhcGlVcmwiLCJfYXR0ZW5kYW5jZXMiLCJfc3R1ZGVudEF0dGVuZGFuY2VzIiwiX3NlcXVlbmNlIiwiZ2V0QXR0ZW5kYW5jZUxpc3QiLCJhdHRlbmRhbmNlSWQiLCJmaWx0ZXIiLCJnZXRTdHVkZW50QXR0ZW5kYW5jZXMiLCJhc3luYyIsInJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdHVkZW50QXR0ZW5kYW5jZSIsInN0dWRlbnRJZCIsImF0dGVuZGFuY2VNYXAiLCJBdHRlbmRhbmNlIiwiZm9yRWFjaCIsIlN0dWRlbnRBdHRlbmRhbmNlIiwicHVzaCIsImJvZHkiLCJzdGF0dXNUZXh0IiwiX3N0dWRlbnRzIiwib2JqZWN0IiwiU3R1ZGVudCIsImxlbmd0aCIsImdldFN0dWRlbnRzIiwidGhlbiIsImZpbmQiLCJnZXRTdHVkZW50QnlJZCIsInN0dWRlbnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJzdHVkZW50U2VydmljZSIsIlN0dWRlbnRTZXJ2aWNlIiwiYXR0ZW5kYW5jZVNlcnZpY2UiLCJBdHRlbmRhbmNlU2VydmljZSIsImFkZFN0dWRlbnRCdXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXBkYXRlU3R1ZGVudEJ1dHRvbiIsInRha2VBdHRlbmRhbmNlQnV0dG9uIiwidXBkYXRlQXR0ZW5kYW5jZUJ1dHRvbiIsIm5hbWVJbnB1dCIsInN1cm5hbWVJbnB1dCIsInNlbGVjdFByYXllclRpbWUiLCJzZWxlY3RMaXN0IiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJteVNlbGVjdEF0dGVuZGFuY2VJZCIsIm15U2VsZWN0U3R1ZGVudElkIiwic3R1ZGVudFRhYmxlIiwidGFrZUF0dGVuZGFuY2VUYWJsZSIsImxpc3RBdHRlbmRhbmNlQm9keSIsInRib2R5TGlzdEZvckF0dGVuZGFuY2UiLCJ0Ym9keUxpc3RXaXRoU3R1ZGVudElkIiwiZmV0Y2hTdHVkZW50cyIsInNob3dMaXN0cyIsInJlZ05hbWUiLCJyZWdTdXJuYW1lIiwic2VsZWN0ZWRTdHVkZW50Iiwic2VsZWN0ZWRBdHRlbmRhbmNlSWQiLCJpbm5lckhUTUwiLCJ0ciIsImNyZWF0ZUVsZW1lbnQiLCJ0ZElkIiwidGROYW1lIiwidGRTdXJuYW1lIiwidGRBYnNlbnQiLCJ0ZERlbGV0ZSIsInRkVXBkYXRlIiwidGRCdXR0b24iLCJkZWxldGVCdXR0b24iLCJ1cGRhdGVCdXR0b24iLCJ0b1N0cmluZyIsImlubmVyVGV4dCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRlbGV0ZVN0dWRlbnQiLCJOdW1iZXIiLCJkYXRhc2V0IiwiYWxlcnQiLCJ2YWx1ZSIsInN0eWxlIiwiZGlzcGxheSIsInNob3dTdHVkZW50TGlzdCIsInRkT3B0aW9uIiwic2VsZWN0Iiwib3B0aW9uMSIsIm9wdGlvbjIiLCJzaG93QXR0ZW5kYW5jZUxpc3QiLCJhdHRlbmRhbmNlTGlzdCIsIm9wdGlvbiIsImxpc3RBdHRlbmRhbmNlRm9yU3R1ZGVudHMiLCJzdHVkZW50TGlzdCIsImxpc3RTdHVkZW50c0ZvckF0dGVuZGFuY2UiLCJsaXN0QXR0ZW5kYW5jZSIsInRkRGF0ZSIsInRkUHJheWVyVGltZSIsImRlbGV0ZUF0dGVuZGFuY2UiLCJ0ZXN0IiwiYWRkU3R1ZGVudCIsInVwZGF0ZVN0dWRlbnQiLCJtYXAiLCJNYXAiLCJpbmRleCIsInNldCIsInRha2VBdHRlbmRhbmNlIiwidXBkYXRlQXR0ZW5kYW5jZSIsInN0dWRlbnRBdHRlbmRhbmNlRmlsdGVyIiwiZ2V0QXR0ZW5kYW5jZXNCeUF0dGVuZGFuY2VJZCIsImxpc3RTdHVkZW50c1dpdGhBdHRlbmRhbmNlSWQiLCJnZXRBdHRlbmRhbmNlc0J5U3R1ZGVudElkIiwidGRUb2RheSIsImxpc3RBdHRlbmRhbmNlV2l0aFN0dWRlbnRJZCJdLCJzb3VyY2VSb290IjoiIn0=